Vagrant.configure("2") do |config|
    config.vm.synced_folder ".", "/vagrant", disabled: true

    config.vm.define "ghost", autostart: false do |abp|
        abp.vm.box = "ubuntu/jammy64"
        abp.vm.hostname = "ghost"
        abp.vm.network "private_network", ip: "192.168.56.2"
        abp.vm.network "forwarded_port", guest: 80, host: 8080, host_ip: "127.0.0.1"
        abp.vm.network "forwarded_port", guest: 443, host: 4443, host_ip: "127.0.0.1"

        abp.vm.provider "virtualbox" do |vb|
            vb.gui = false # Display the VirtualBox GUI when booting the machine
            vb.name = "ghost"
            vb.memory = "1024"
            vb.cpus = 1
        end

        abp.vm.cloud_init :user_data do |cloud_init|
            cloud_init.content_type = "text/cloud-config"
            cloud_init.path = "../cloud-init.yml"
        end
    end

    config.vm.define "tests", autostart: false do |tests|
        tests.vm.box = "ubuntu/jammy64"
        tests.vm.hostname = "tests"
        tests.vm.network "private_network", ip: "192.168.56.2"
        tests.vm.network "forwarded_port", guest: 80, host: 8081, host_ip: "127.0.0.1"
        tests.vm.network "forwarded_port", guest: 443, host: 4444, host_ip: "127.0.0.1"

        tests.vm.provider "virtualbox" do |vb|
            vb.gui = false # Display the VirtualBox GUI when booting the machine
            vb.name = "tests"
            vb.memory = "1024"
            vb.cpus = 1
        end

        tests.vm.cloud_init :user_data do |cloud_init|
            cloud_init.content_type = "text/cloud-config"
            cloud_init.path = "../cloud-init.yml"
        end
    end
end
